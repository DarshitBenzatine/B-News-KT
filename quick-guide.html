<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>B-News Project - Quick Reference Guide</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
    /* Reset & Base */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: 'Inter', sans-serif; background: #f5f7fa; color: #1a1a1a; line-height:1.6; }
    h1,h2,h3,h4 { font-weight:600; margin-bottom:10px; }
    code { background:#1a1a1a; padding:2px 5px; border-radius:4px; font-family: monospace; color: ; }
    pre { background:#272822; color:#f8f8f2; padding:15px; border-radius:8px; overflow-x:auto; margin:10px 0; }
    a { color:#4f46e5; text-decoration:none; }
    a:hover { text-decoration:underline; }

    /* Layout */
    .container { max-width: 1000px; margin: 0 auto; padding:20px; }
    section { background:white; padding:25px; margin:20px 0; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,0.08); opacity:0; transform: translateY(30px); transition:0.6s ease-in-out; }
    section.visible { opacity:1; transform: translateY(0); }

    /* Table */
    table { width:100%; border-collapse: collapse; margin:15px 0; }
    th, td { padding:10px; border:1px solid #ddd; text-align:left; }
    th { background: #4f46e5; color:white; }

    /* Code highlight */
    pre code { display:block; white-space: pre-wrap; }

    /* Emoji headers */
    h2::before { margin-right:8px; }

    /* Important notes */
    .note { background: #fff3cd; border-left: 5px solid #ffeeba; padding:15px; border-radius:6px; margin:10px 0; }

    /* API cards */
    .api-card { background: linear-gradient(135deg,#4f46e5,#8b5cf6); color:white; padding:15px; border-radius:8px; margin:10px 0; transition: transform 0.3s ease; }
    .api-card:hover { transform: translateY(-5px); }

    /* Scroll animation */
    @keyframes fadeInUp { from { opacity:0; transform: translateY(30px); } to { opacity:1; transform: translateY(0); } }
</style>
</head>
<body>
<div class="container">

<h1>üìò B-News Project - Quick Reference Guide</h1>

<section>
<h2>üöÄ Quick Start</h2>
<h3>Database Connection</h3>
<pre><code>&lt;?php
// File: common.php
$conn = mysqli_connect("localhost", "root", "", "stega_staging_new", 3306);
?&gt;
</code></pre>

<h3>Key Constants</h3>
<pre><code>
BASE_URL          // API base URL
USER_PROFILE_PATH // User images path
MAIN_URL          // Main app URL
ADMIN_URL         // Admin panel URL
</code></pre>
</section>

<section>
<h2>üìÅ File Locations</h2>
<table>
<thead>
<tr><th>Module</th><th>Admin Panel</th><th>API Endpoint</th></tr>
</thead>
<tbody>
<tr><td><b>Login</b></td><td>bn-controlpanel/login.php</td><td>webservice_1_18_1_ios/user_login.php</td></tr>
<tr><td><b>Course</b></td><td>bn-controlpanel/bn_course.php</td><td>webservice_1_18_1_ios/get-bn-coursedata.php</td></tr>
<tr><td><b>Level Check</b></td><td>bn-controlpanel/level_check.php</td><td>webservice_1_18_1_ios/level_check_start.php</td></tr>
<tr><td><b>Phrases</b></td><td>bn-controlpanel/phrases_topic_list.php</td><td>webservice_1_18_1_ios/get_phraseslist.php</td></tr>
<tr><td><b>Questions</b></td><td>bn-controlpanel/lesson-questions.php</td><td>webservice_1_18_1_ios/get-bn-course-question-list.php</td></tr>
</tbody>
</table>
</section>

<section>
<h2>üóÑÔ∏è Key Database Tables</h2>

<h3>User Management</h3>
<ul>
<li>tbl_user - Main user table</li>
<li>admin_login - Admin users</li>
<li>device_registration - Push notification tokens</li>
</ul>

<h3>Course System</h3>
<ul>
<li>bn_course_questions - All course questions</li>
<li>bn_level_check_sessions - Level check sessions</li>
<li>bn_level_check_answers - Level check answers</li>
</ul>

<h3>Content</h3>
<ul>
<li>tbl_phrases_list - Master phrase lists</li>
<li>tbl_phraseslist_word - Phrases in lists</li>
<li>tbl_newwordlist - User word lists</li>
<li>tbl_wordlist - Words in lists</li>
</ul>
</section>

<section>
<h2>üîë Common Functions</h2>

<h3>Get Course Data</h3>
<pre><code>$course = getCourseData(); // Returns full course structure</code></pre>

<h3>Check Admin Login</h3>
<pre><code>check_user_is_login(); // Validates admin session</code></pre>

<h3>Standard API Response</h3>
<pre><code>$result = array(
    'status_code' =&gt; 200,
    'msg' =&gt; 'Success',
    'data' =&gt; $data
);
echo json_encode($result);
</code></pre>

<h3>Database Query Pattern</h3>
<pre><code>$query = mysqli_query($conn, "SELECT * FROM table WHERE id = $id");
if (mysqli_num_rows($query) &gt; 0) {
    $row = mysqli_fetch_assoc($query);
}
</code></pre>

<h3>Prepared Statement Pattern</h3>
<pre><code>$stmt = $con-&gt;prepare("SELECT * FROM table WHERE id = ?");
$stmt-&gt;bind_param('i', $id);
$stmt-&gt;execute();
$result = $stmt-&gt;get_result();
$row = $result-&gt;fetch_assoc();
$stmt-&gt;close();
</code></pre>
</section>

<section>
<h2>üéØ Level Check Flow</h2>
<ol>
<li><b>Start:</b> level_check_start.php - Creates session, returns 4 questions</li>
<li><b>Submit:</b> level_check_submit.php - Processes answers, Binary search: ‚â•3 correct = UP, &lt;3 = DOWN, Returns next questions OR completion</li>
<li><b>Result:</b> When 20 questions answered - Calculates accuracy, Determines result lesson, Returns summary + achievements</li>
</ol>
</section>

<section>
<h2>üìö Course Structure</h2>
<pre><code>
Section (id, title, color)
  ‚îî‚îÄ‚îÄ Chapter (id, title, category)
      ‚îî‚îÄ‚îÄ Lesson (id, title, question_type)
</code></pre>
<p><b>Sections:</b></p>
<ul>
<li>Framework (id: 1) - Grammar</li>
<li>Input (id: 2) - Listening</li>
<li>Output (id: 3) - Shadowing/Composer</li>
</ul>
</section>

<section>
<h2>üîê Authentication</h2>

<h3>Admin Login</h3>
<pre><code>// Password: SHA1 hashed
$password = sha1($_POST['password']);
// Session: $_SESSION['admin_username']
</code></pre>

<h3>User Login</h3>
<pre><code>// Password: SHA1 hashed
$password = sha1($_POST['password']);
// Check: email OR username
// Update: device_id, device_token
</code></pre>
</section>

<section>
<h2>üìù Phrases Module Flow</h2>
<ol>
<li><b>Get Lists:</b> get_phraseslist.php - Returns all active phrase lists</li>
<li><b>Get Phrases:</b> get_phraseslist_word.php - Returns phrases in a list</li>
<li><b>Save List:</b> set_phraseslist.php - Creates/updates user phrase list</li>
</ol>
</section>

<section>
<h2>‚ö†Ô∏è Important Notes</h2>
<div class="note">
<ul>
<li>No Laravel: Pure procedural PHP</li>
<li>No ORM: Raw MySQLi queries</li>
<li>No MVC: Direct file access</li>
<li>SHA1 Passwords: Consider upgrading</li>
<li>Manual Auth: No middleware/guards</li>
</ul>
</div>
</section>

<section>
<h2>üêõ Debugging Tips</h2>

<h3>Check Database Connection</h3>
<pre><code>if (!$conn) {
    die('Connection Error: ' . mysqli_connect_error());
}</code></pre>

<h3>View Course Data</h3>
<pre><code>$course = getCourseData();
echo "&lt;pre&gt;"; print_r($course); echo "&lt;/pre&gt;";</code></pre>

<h3>Log Messages</h3>
<pre><code>log_msg("Debug message: " . $variable);</code></pre>
</section>

<section>
<h2>üìû API Endpoint Examples</h2>

<div class="api-card">
<h3>User Login</h3>
<pre><code>POST: webservice_1_18_1_ios/user_login.php
Body: {
    "username": "user@email.com",
    "password": "password",
    "device_id": "device123",
    "device_token": "token123"
}</code></pre>
</div>

<div class="api-card">
<h3>Start Level Check</h3>
<pre><code>POST: webservice_1_18_1_ios/level_check_start.php
Body: {
    "user_id": 123
}</code></pre>
</div>

<div class="api-card">
<h3>Submit Level Check</h3>
<pre><code>POST: webservice_1_18_1_ios/level_check_submit.php
Body: {
    "session_id": 456,
    "user_id": 123,
    "answers": [
        {"question_id": 1, "selected_answer": "A", "is_correct": 1}
    ]
}</code></pre>
</div>
</section>

<section>
<p><b>For detailed information, see <a href="https://darshitbenzatine.github.io/B-News-KT" target="_blank">PROJECT KNOWLEDGE TRANSFER</a></b></p>
</section>

</div>

<script>
    // Scroll animation
    const sections = document.querySelectorAll('section');
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if(entry.isIntersecting) { entry.target.classList.add('visible'); }
        });
    }, { threshold: 0.2 });

    sections.forEach(sec => observer.observe(sec));
</script>

</body>
</html>
